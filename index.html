<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Droplr API Documentation</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <div class="logo"></div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Droplr API. This documentation is split up between <a href="#private-operations">private</a> and <a href="#public-operations">public</a> operations.</p>

          <h1 id="private-operations">Private Operations</h1>

<h2 id="session-based-authentication">Session-based Authentication</h2>

<p>Droplr&rsquo;s API server notion of session is a bit different from what the name may imply. The basis of the authentication system is the email/password based authentication. However, this system is not adequate for the anonymous drag and drop upload feature presented by Droplr&rsquo;s web app.</p>

<p>Droplr&rsquo;s API had, therefore, to support some kind of anonymous authentication mechanism that worked pretty much the same way as an email/password authentication system, except accounts could be created on-the-fly without registration info.</p>

<p>The session-based authentication works by performing calls to the server using a variant of the authentication mechanism and providing a unique identifier - the session identifier - instead of the typical email/password combination.</p>

<p>A session works pretty much the same way as a regular account, except it has more restrictive limits:</p>

<ul>
<li>Upload size is limited to 10MB per file</li>
<li>The daily upload cap is 10 drops</li>
<li>The maximum space allowed is 100MB</li>
<li>After a period of 3 days of inactivity, all drops are deleted</li>
</ul>

<p>The idea of anonymous upload is to allow people to try out Droplr really quick and then proceed to register a regular account. In the process of registering, all the previous anonymous uploads are migrated &ndash; if a user uploads a file using the anonymous drag&amp;drop and then registers, that file will be present when he lists the drops in his new account.</p>

<aside class="notice">
  The session id must be 32-char long alphanumeric string (MD5 hash).
</aside>

<h3 id="session-authentication-formula">Session Authentication Formula</h3>

<p>Starting from the end, an example of how an session Authorization header should look is:</p>

<p><code class="prettyprint">Authorization: droplrses cHVibGlja2V5OmQwNmY2ZTZlOTEyOGEyMzkzYjczNThmZjcwMTI0NTUw:QC0bWeSf8m979k4+AJ6lLxeMAfg=</code></p>

<p>This can be decomposed as:</p>

<p><code class="prettyprint">Authorization: droplrses BASE64(ApplicationPublicKey:SessionId):signature</code></p>

<p>Where <code class="prettyprint">ApplicationPublicKey</code> and <code class="prettyprint">SessionId</code> are the application&rsquo;s assigned public key and the session identifier. The formula to compute the <code class="prettyprint">signature</code> parameter is:</p>

<p><code class="prettyprint">HMAC_SHA1(ApplicationPrivateKey:Password, stringToSign)</code></p>

<p>The first big difference to the user based authentication system appears here. Since we&rsquo;re talking about anonymous volatile sessions, there are not passwords set. In order for Droplr to ensure the validity of the request, the password is itself a token calculated based on the session id. Its formula is thus:</p>

<p><code class="prettyprint"># generate an authenticity token</code></p>

<p><code class="prettyprint">authenticityToken = MD5(ApplicationPrivateKey:SessionId:Salt)</code></p>

<p><code class="prettyprint"># the password is the first half of the sessionId concatenated with the second half of the authenticity token</code></p>

<p><code class="prettyprint">Password = SUBSTRING(SessionId, 0, 16) + SUBSTRING(authenticityToken, 16, 32)</code></p>

<p>The <code class="prettyprint">Salt</code> is a safe string (not documented here) to further reduce the chances of creating a valid request for abuse.</p>

<p>The process to create the <code class="prettyprint">stringToSign</code> token is exactly the same as for user based authentication.</p>

<h3 id="session-creation">Session Creation</h3>

<p>The only way to create new sessions using session-based authentication is to perform a drop upload. When using session based authentication against <code class="prettyprint">Create Drop - Link</code>, <code class="prettyprint">Create Drop - Note</code> or <code class="prettyprint">Create Drop - File</code> operations, the server will either associate the drop with an existing session or create a new record, if no previous session with the same id existed.</p>

<h2 id="anonyomous-authentication">Anonyomous Authentication</h2>

<p>Droplr&rsquo;s API server also supports anonymous user authentication.
This authentication&rsquo;s formula is exactly the same as user-based authentication, except for the fact that the email must be <code class="prettyprint">anonymous@droplr.com</code> and the password is a SHA-1 hash of the string <code class="prettyprint">anonymous</code>.
Furthermore, the type of authentication identifier of the <em>Authorization</em> header is <code class="prettyprint">droplranon</code> rather than <code class="prettyprint">droplr</code>.</p>

<p>Example:</p>

<p><code class="prettyprint">Authorization: droplranon cHVibGlja2V5OmFub255bW91c0Bkcm9wbHIuY29t:m3n/LQOwt3Cv95KfJsnlbG2R/lM=</code></p>

<p>The applications of this authentication are limited; currently it&rsquo;s only valid for the creation of new accounts and reading drops &ndash; assuming the application has enough <a href="#privileges">privileges</a> to execute the operations.</p>

<h2 id="actions">Actions</h2>

<h3 id="create-account">Create Account</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"test-26z84u30@droplr.com"</span><span class="p">,</span>
  <span class="s2">"password"</span><span class="p">:</span> <span class="s2">"5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8"</span><span class="p">,</span>
  <span class="s2">"firstName"</span><span class="p">:</span> <span class="s2">"Node"</span><span class="p">,</span>
  <span class="s2">"lastName"</span><span class="p">:</span> <span class="s2">"Client"</span>
<span class="p">});</span>

<span class="nx">request</span><span class="p">({</span>
   <span class="s2">"method"</span><span class="p">:</span><span class="s2">"POST"</span><span class="p">,</span>
   <span class="s2">"url"</span><span class="p">:</span><span class="s2">"http://sandbox.droplr.com:8069/account"</span><span class="p">,</span>
   <span class="s2">"headers"</span><span class="p">:{</span>
      <span class="s2">"Date"</span><span class="p">:</span><span class="s2">"Fri, 01 Aug 2014 19:51:54 GMT"</span><span class="p">,</span>
      <span class="s2">"Accept"</span><span class="p">:</span><span class="s2">"application/json; version=0.9"</span><span class="p">,</span>
      <span class="s2">"User-Agent"</span><span class="p">:</span><span class="s2">"droplr-node-client"</span><span class="p">,</span>
      <span class="s2">"Content-Type"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">,</span>
      <span class="s2">"Authorization"</span><span class="p">:</span><span class="s2">"droplranon YXBwXzBfcHVibGlja2V5OmFub255bW91c0Bkcm9wbHIuY29t:gR0G6jV8LHGwbhoN0XFkI7TJu6k="</span>
   <span class="p">},</span>
   <span class="s2">"body"</span><span class="err">:</span> <span class="nx">user</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// Do something with the response</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="nt">"teamName"</span><span class="p">:</span><span class="s2">"droplr"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"totalSpace"</span><span class="p">:</span><span class="mi">107374182400</span><span class="p">,</span><span class="w">
   </span><span class="nt">"teamAdmin"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"team"</span><span class="p">:</span><span class="s2">"id"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"PRO"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"id"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"extraSpace"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"user@droplr.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1406919673658</span><span class="p">,</span><span class="w">
   </span><span class="nt">"verified"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="nt">"dropPrivacy"</span><span class="p">:</span><span class="s2">"PRIVATE"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"subdomain"</span><span class="p">:</span><span class="s2">"droplr"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"trial"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"subscriptionEnd"</span><span class="p">:</span><span class="mi">1409511673658</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create an account</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">POST /account</code></p>

<table><thead>
<tr>
<th style="text-align: left">Name</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">email</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>Required</strong> The email of the account to be created</td>
</tr>
<tr>
<td style="text-align: left">password</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>Required</strong> The account password, hashed with MD5 algorythm</td>
</tr>
<tr>
<td style="text-align: left">domain</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The domain to be used for shortlinks</td>
</tr>
<tr>
<td style="text-align: left">domainType</td>
<td style="text-align: left">string</td>
<td style="text-align: left">What should be used in shortlinks DEFAULT, DOMAIN, SUB_DOMAIN</td>
</tr>
<tr>
<td style="text-align: left">subdomain</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The subdomain to be used shortlinks (e.g. subdomain.d.pr/xkdg).</td>
</tr>
<tr>
<td style="text-align: left">firstName</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The user&rsquo;s first name</td>
</tr>
<tr>
<td style="text-align: left">lastName</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The user&rsquo;s last name</td>
</tr>
<tr>
<td style="text-align: left">username</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The user&rsquo;s username</td>
</tr>
<tr>
<td style="text-align: left">dropPrivacy</td>
<td style="text-align: left">string</td>
<td style="text-align: left">PUBLIC or PRIVATE</td>
</tr>
<tr>
<td style="text-align: left">theme</td>
<td style="text-align: left">string</td>
<td style="text-align: left">light or dark</td>
</tr>
</tbody></table>

<h5 id="error-responses">Error Responses</h5>

<h6 id="400-bad-request-missing-email-or-password">400 (Bad Request): Missing Email or Password</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidEmail</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Email is not valid</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidEmail</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Email is not valid</code></td>
</tr>
</tbody></table>

<h6 id="400-bad-request-invalid-email">400 (Bad Request): Invalid Email</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidEmail</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Email is not valid</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidEmail</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Email is not valid</code></td>
</tr>
</tbody></table>

<h6 id="409-conflict-email-already-taken">409 (Conflict): Email Already Taken</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.EmailAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">That email is already taken; if it&#39;s yours please contact Droplr support</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.EmailAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">That email is already taken; if it&#39;s yours please contact Droplr support</code></td>
</tr>
</tbody></table>

<h6 id="400-bad-request-invalid-password">400 (Bad Request): Invalid Password</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidPassword</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Password must be a SHA1 hash of the user input</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidPassword</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Password must be a SHA1 hash of the user input</code></td>
</tr>
</tbody></table>

<h6 id="400-bad-request-invalid-username">400 (Bad Request): Invalid Username</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidUsername</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Invalid Username</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidUsername</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Invalid Username</code></td>
</tr>
</tbody></table>

<h6 id="409-conflict-username-already-taken">409 (Conflict): Username Already Taken</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.UsernameAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">That username is already taken</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.UsernameAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">That username is already taken</code></td>
</tr>
</tbody></table>

<h6 id="409-conflict-domain-already-taken">409 (Conflict): Domain Already Taken</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.DomainAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Domain already taken</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.DomainAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Domain already taken</code></td>
</tr>
</tbody></table>

<h5 id="notes">Notes</h5>

<ul>
<li>The authentication used for this action must be Anonymous User authentication. Only first party applications are allowed to create accounts.</li>
<li>Subdomain will be used for teamName.</li>
<li>If a subdomain is provided but is in use, an incremental integer will be added as a suffix.</li>
<li>If a subdomain is not provided one will be derived from the email domain.</li>
</ul>

<h3 id="create-team-member-account">Create Team Member Account</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"test-26z84u30@droplr.com"</span><span class="p">,</span>
  <span class="s2">"password"</span><span class="p">:</span> <span class="s2">"5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8"</span><span class="p">,</span>
  <span class="s2">"firstName"</span><span class="p">:</span> <span class="s2">"Node"</span><span class="p">,</span>
  <span class="s2">"lastName"</span><span class="p">:</span> <span class="s2">"Client"</span>
<span class="p">});</span>

<span class="nx">request</span><span class="p">({</span>
   <span class="s2">"method"</span><span class="p">:</span><span class="s2">"POST"</span><span class="p">,</span>
   <span class="s2">"url"</span><span class="p">:</span><span class="s2">"http://sandbox.droplr.com:8069/teams/1/account"</span><span class="p">,</span>
   <span class="s2">"headers"</span><span class="p">:{</span>
      <span class="s2">"Date"</span><span class="p">:</span><span class="s2">"Fri, 01 Aug 2014 19:51:54 GMT"</span><span class="p">,</span>
      <span class="s2">"Accept"</span><span class="p">:</span><span class="s2">"application/json; version=0.9"</span><span class="p">,</span>
      <span class="s2">"User-Agent"</span><span class="p">:</span><span class="s2">"droplr-node-client"</span><span class="p">,</span>
      <span class="s2">"Content-Type"</span><span class="p">:</span><span class="s2">"application/json"</span><span class="p">,</span>
      <span class="s2">"Authorization"</span><span class="p">:</span><span class="s2">"droplranon YXBwXzBfcHVibGlja2V5OmFub255bW91c0Bkcm9wbHIuY29t:gR0G6jV8LHGwbhoN0XFkI7TJu6k="</span>
   <span class="p">},</span>
   <span class="s2">"body"</span><span class="err">:</span> <span class="nx">user</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// Do something with the response</span>
<span class="p">});</span>
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">  
   </span><span class="nt">"teamName"</span><span class="p">:</span><span class="s2">"my co"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"useLogo"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"logo"</span><span class="p">:</span><span class="s2">"http://logo"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"totalSpace"</span><span class="p">:</span><span class="mi">107374182400</span><span class="p">,</span><span class="w">
   </span><span class="nt">"usedSpace"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"theme"</span><span class="p">:</span><span class="s2">"light"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"team"</span><span class="p">:</span><span class="s2">"team_id"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"domainType"</span><span class="p">:</span><span class="s2">"DEFAULT"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"PRO"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"id"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"dropCount"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"maxUploadSize"</span><span class="p">:</span><span class="mi">2147483648</span><span class="p">,</span><span class="w">
   </span><span class="nt">"rootRedirect"</span><span class="p">:</span><span class="s2">"http://biasedbit.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"username"</span><span class="p">:</span><span class="s2">"user1"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"extraSpace"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"email"</span><span class="p">:</span><span class="s2">"user1@droplr.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1406929260072</span><span class="p">,</span><span class="w">
   </span><span class="nt">"verified"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="nt">"dropPrivacy"</span><span class="p">:</span><span class="s2">"PUBLIC"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"subdomain"</span><span class="p">:</span><span class="s2">"myco"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"domain"</span><span class="p">:</span><span class="s2">"drops.biasedbit.com"</span><span class="p">,</span><span class="w">
   </span><span class="nt">"useRootRedirect"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="nt">"activeDrops"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="nt">"subscriptionEnd"</span><span class="p">:</span><span class="mi">1406929258896</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create team member account</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">POST /teams/:team_id/account</code></p>

<table><thead>
<tr>
<th style="text-align: left">Name</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">email</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>Required</strong> The email of the account to be created</td>
</tr>
<tr>
<td style="text-align: left">password</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>Required</strong> The account password, hashed with MD5 algorythm</td>
</tr>
<tr>
<td style="text-align: left">firstName</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The user&rsquo;s first name</td>
</tr>
<tr>
<td style="text-align: left">lastName</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The user&rsquo;s last name</td>
</tr>
<tr>
<td style="text-align: left">username</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The user&rsquo;s username</td>
</tr>
</tbody></table>

<h5 id="error-responses">Error Responses</h5>

<h6 id="400-bad-request-missing-email-or-password">400 (Bad Request): Missing Email or Password</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.MissingEmailOrPassword</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Missing email and/or password</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.MissingEmailOrPassword</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Missing email and/or password</code></td>
</tr>
</tbody></table>

<h6 id="400-bad-request-invalid-email">400 (Bad Request): Invalid Email</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidEmail</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Email is not valid</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidEmail</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Email is not valid</code></td>
</tr>
</tbody></table>

<h6 id="409-conflict-email-already-taken">409 (Conflict): Email Already Taken</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.EmailAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">That email is already taken; if it&#39;s yours please contact Droplr support</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.EmailAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">That email is already taken; if it&#39;s yours please contact Droplr support</code></td>
</tr>
</tbody></table>

<h6 id="400-bad-request-password-invalid">400 (Bad Request): Password Invalid</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidPassword</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Password must be a SHA1 hash of the user input</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidPassword</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Password must be a SHA1 hash of the user input</code></td>
</tr>
</tbody></table>

<h6 id="400-bad-request-username-invalid">400 (Bad Request): Username Invalid</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidUsername</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">Invalid Username</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.InvalidUsername</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">Invalid Username</code></td>
</tr>
</tbody></table>

<h6 id="409-conflict-username-already-taken">409 (Conflict): Username Already Taken</h6>

<table><thead>
<tr>
<th>Header Key</th>
<th>Header Value</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.UsernameAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">droplr-errordetails</code></td>
<td><code class="prettyprint">That username is already taken</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errorcode</code></td>
<td><code class="prettyprint">CreateAccount.UsernameAlreadyTaken</code></td>
</tr>
<tr>
<td><code class="prettyprint">x-droplr-errordetails</code></td>
<td><code class="prettyprint">That username is already taken</code></td>
</tr>
</tbody></table>

<h5 id="notes">Notes</h5>

<ul>
<li>The authentication used for this action must be Anonymous User authentication. Only first party applications are allowed to create accounts.</li>
</ul>

<h3 id="update-customer-id">Update Customer ID</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">subscriptionId</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"test-26z84u30@droplr.com"</span><span class="p">,</span>
  <span class="s2">"service"</span><span class="p">:</span> <span class="s2">"stripe"</span><span class="p">,</span>
  <span class="s2">"customerId"</span><span class="p">:</span> <span class="s2">"xkdc"</span>
<span class="p">});</span>

<span class="nx">request</span><span class="p">({</span>  
   <span class="s2">"method"</span><span class="p">:</span><span class="s2">"PUT"</span><span class="p">,</span>
   <span class="s2">"url"</span><span class="p">:</span><span class="s2">"http://sandbox.droplr.com:8069/account/customer_id"</span><span class="p">,</span>
   <span class="s2">"headers"</span><span class="p">:{</span>  
      <span class="s2">"Date"</span><span class="p">:</span><span class="s2">"Wed, 06 Aug 2014 20:55:35 GMT"</span><span class="p">,</span>
      <span class="s2">"Accept"</span><span class="p">:</span><span class="s2">"application/json; version=1.0"</span><span class="p">,</span>
      <span class="s2">"User-Agent"</span><span class="p">:</span><span class="s2">"droplr-node-client"</span><span class="p">,</span>
      <span class="s2">"Content-Type"</span><span class="p">:</span><span class="s2">"application/json; v=1.0; encoding=utf-8;"</span><span class="p">,</span>
      <span class="s2">"Authorization"</span><span class="p">:</span><span class="s2">"droplranon YXBwXzBfcHVibGlja2V5OmFub255bW91c0Bkcm9wbHIuY29t:/xAaACyWDdtVIdCMrfRU7xos9TY="</span>
   <span class="p">},</span>
   <span class="s2">"body"</span><span class="err">:</span> <span class="nx">subscriptionId</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
     <span class="c1">// Do something with the response</span>
<span class="p">});</span>
</code></pre>

<p>Create a customer_id</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">PUT /account/customer_id</code></p>

<table><thead>
<tr>
<th style="text-align: left">Name</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">email</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>Required</strong> The email of the account to be update</td>
</tr>
<tr>
<td style="text-align: left">service</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>Required</strong> The service for which customerId will be updated</td>
</tr>
<tr>
<td style="text-align: left">customerId</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>Required</strong> The customerId to be set for service</td>
</tr>
</tbody></table>

<h5 id="error-responses">Error Responses</h5>

<h3 id="convert-session-to-account">Convert Session to Account</h3>

<p>Create session to account</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">POST /sessions/convert</code></p>

<p>Same input parameters and format as <a href="#create-account">create account</a> action.</p>

<h5 id="responses">Responses</h5>

<p>Same output parameters and format as <a href="#create-account">create account</a> action.</p>

<h5 id="notes">Notes</h5>

<ul>
<li>The authentication used for this action must be session authentication. Only first party web application tier apps can perform this action (basically just the website at droplr.com).</li>
<li>This action creates a new account with the provided details and migrates all the drops from the session - which is invalidated - to the new user account.</li>
</ul>

          <h1 id="public-operations">Public Operations</h1>

<h2 id="authentication-amp-authorization">Authentication &amp; Authorization</h2>

<p>All API operations must be properly authenticated. In order for you to access the API you must have a public/private key combination to access Droplr&rsquo;s API server.</p>

<p>Authentication works on a per-request basis, which means that every single request must be pre-signed according to its contents.</p>

<p>Droplr API server uses a custom authentication method along with some other mechanisms to ensure a safe non-reversible authentication method which is also immunte to replay attacks.</p>

<h3 id="protection-against-replay-attacks">Protection Against Replay Attacks</h3>

<p>All requests must include a <code class="prettyprint">Date</code> header, with the time in Unix (POSIX) format &ndash; the <strong>milliseconds</strong> elapsed since midnight January 1st, 1970, UTC.</p>

<p>This value must fall within 15 minutes (ahead or behind) the server&rsquo;s clock. If this condition fails, the requests may be discarded. Furthermore, the server keeps used signatures in a local cache &ndash; during the time window in which they are valid &ndash; in order to avoid replay attacks.</p>

<aside class="notice">
  If the framework you&rsquo;re using doesn&rsquo;t allow you to manually set the <code>Date</code> header, you can use the custom <code>x-droplr-date</code> header. When set, this header will take precedence over the <code>Date</code> header.
</aside>

<h3 id="application-privileges">Application Privileges</h3>

<p>Droplr API server provides many operations; the ability to execute them depends on the privileges configured for the public/private API key pair assigned to an application.</p>

<p>As an example, a typical third party application will be able to list drops, perform uploads, delete drops and alter user information but it won&rsquo;t be able to create new accounts.</p>

<h3 id="authentication-formula">Authentication Formula</h3>
<pre class="highlight shell"><code><span class="c"># Example Authorization header</span>

Authorization: droplr YXBwXzBfcHVibGlja2V5OnVzZXJfMUBkcm9wbHIuY29t:3+MqSMFYYwh6grneUezBtRkunmE<span class="o">=</span>
</code></pre>

<p>Starting from the end, an example of how an <code class="prettyprint">Authorization</code> header should look is:</p>

<p><code class="prettyprint">Authorization: droplr YXBwXzBfcHVibGlja2V5OnVzZXJfMUBkcm9wbHIuY29t:3+MqSMFYYwh6grneUezBtRkunmE=</code></p>

<p>This can be decomposed as:</p>

<p><code class="prettyprint">Authorization: droplr BASE64(ApplicationPublicKey:UserEmail):signature</code></p>

<p>Where <code class="prettyprint">ApplicationPublicKey</code> and <code class="prettyprint">UserEmail</code> are your application&rsquo;s assigned public key and the user&rsquo;s email.
The formula to compute the <code class="prettyprint">signature</code> parameter is:</p>

<p><code class="prettyprint">HMAC_SHA1(ApplicationPrivateKey:UserPasswordSHA1, stringToSign)</code></p>

<p><code class="prettyprint">ApplicationPrivateKey</code> and <code class="prettyprint">UserPasswordSHA1</code> are your application&rsquo;s assigned secret key and the user&rsquo;s (hashed) password.
The hashing function for the password is SHA-1.</p>

<aside class="notice">
  We <strong>strongly recommend</strong> you to always store the hash of the password as your users enter their credentials, discarding the clear password as soon as possible.
</aside>
<pre class="highlight shell"><code><span class="c"># Example stringToSign parameter</span>

POST /note.json HTTP/1.1<span class="se">\n</span>
text/plain<span class="se">\n</span>
1299648278321


<span class="c"># Example stringToSign parameter with no contentType</span>

GET /files/code HTTP/1.1<span class="se">\n</span>
<span class="se">\n</span>
1299648278321


<span class="c"># Putting it all together</span>

stringToSign <span class="o">=</span> Request-Line<span class="se">\n</span>
               Content-Type<span class="se">\n</span>
               Date

signature <span class="o">=</span> HMAC_SHA1<span class="o">(</span>ApplicationPrivateKey:MD5<span class="o">(</span>UserPassword<span class="o">)</span>, stringToSign<span class="o">)</span>

Authorization: droplr BASE64<span class="o">(</span>ApplicationPublicKey:UserEmail<span class="o">)</span>:signature
</code></pre>

<p>The <code class="prettyprint">stringToSign</code> parameter is a concatenation of some of the contents of the request.</p>

<p>The parameter <code class="prettyprint">requestLine</code> is simply the concatenation of the method, URI and HTTP version (with spaces):</p>

<p><code class="prettyprint">GET /files/code HTTP/1.1</code></p>

<p><code class="prettyprint">contentType</code> and <code class="prettyprint">date</code> parameters are the <code class="prettyprint">Content-Type</code> and <code class="prettyprint">Date</code> headers included in the request. While <code class="prettyprint">contentType</code> may be an empty string (for requests that bear no body), <code class="prettyprint">date</code> is mandatory and must have a value.</p>

<aside class="warning">
  Even when <code>contentType</code> is empty, its trailing line break <strong>MUST</strong> be included. 
</aside>

<h3 id="examples">Examples</h3>

<p>This sub-section provides a couple of examples of requests and their respective generated signature.</p>

<p>The following credentials will be assumed throughout the examples:</p>

<ul>
<li><strong>Public application key:</strong> <code class="prettyprint">family_app</code></li>
<li><strong>Private application key:</strong> <code class="prettyprint">quahog</code></li>
<li><strong>User email:</strong> <code class="prettyprint">quagmire@droplr.com</code></li>
<li><strong>User password:</strong> <code class="prettyprint">giggity</code> (will be hashed to <code class="prettyprint">1869bfcf575c810780534a7f5e4f6c225b4ca3bd</code>)</li>
</ul>

<aside class="warning">
  The pair of characters <code>\n</code> represents the newline character. Do not escape the newline character when creating the signature.
</aside>

<h4 id="signature-example-1-reading-account-details-json">Signature Example 1: Reading Account Details (JSON)</h4>

<p>Request:</p>

<ul>
<li>GET /account.json HTTP/1.1</li>
<li>Date: 1335230330353</li>
<li>Content-Length: 0</li>
</ul>

<p>Signature generation stages:</p>

<ol>
<li>Access key: <code class="prettyprint">ZmFtaWx5X2FwcDpxdWFnbWlyZUBkcm9wbHIuY29t</code></li>
<li>Access secret: <code class="prettyprint">quahog:1869bfcf575c810780534a7f5e4f6c225b4ca3bd</code></li>
<li>String to sign: <code class="prettyprint">GET /account.json HTTP/1.1\n\n1335230330353</code></li>
<li>Signature: <code class="prettyprint">1cGqXOeNPRM5PPpDl1Ca/DdWesY=</code></li>
</ol>

<p>Expected value of <code class="prettyprint">Authorization</code> header:</p>

<p><code class="prettyprint">droplr ZmFtaWx5X2FwcDpxdWFnbWlyZUBkcm9wbHIuY29t:1cGqXOeNPRM5PPpDl1Ca/DdWesY=</code></p>

<h4 id="signature-example-2-creating-a-new-note-json">Signature Example 2: Creating a New Note (JSON)</h4>

<p>Request:</p>

<ul>
<li>POST /notes.json HTTP/1.1</li>
<li>Date: 1335228853999</li>
<li>Content-Type: text/plain</li>
<li>Content-Length: 52</li>
<li>(&hellip; POST body &hellip;) </li>
</ul>

<p>Signature generation stages:</p>

<ol>
<li>Access key: <code class="prettyprint">ZmFtaWx5X2FwcDpxdWFnbWlyZUBkcm9wbHIuY29t</code></li>
<li>Access secret: <code class="prettyprint">quahog:1869bfcf575c810780534a7f5e4f6c225b4ca3bd</code></li>
<li>String to sign: <code class="prettyprint">POST /notes.json HTTP/1.1\ntext/plain\n1335229121561</code></li>
<li>Signature: <code class="prettyprint">zwVsqm6VhEGzFhqBQM+zzvh/PJ8=</code></li>
</ol>

<p>Expected value of <code class="prettyprint">Authorization</code> header:</p>

<p><code class="prettyprint">droplr ZmFtaWx5X2FwcDpxdWFnbWlyZUBkcm9wbHIuY29t:zwVsqm6VhEGzFhqBQM+zzvh/PJ8=</code></p>

<h2 id="data-formats">Data Formats</h2>

<p>You&rsquo;ll need to provide an input for many of the operations against the Droplr API servers, and most operations will also return an output.</p>

<p>Two types of output are supported:</p>

<ul>
<li>Custom headers (from here on referred to as HEADERS, which are headers with the prefix <code class="prettyprint">x-droplr-*</code>)</li>
<li>JSON</li>
</ul>

<p>Whenever possible, clients should use the HEADERS output format. It&rsquo;s lighter for both the server and the client because there is no need for encoding/decoding the contents.</p>

<p>While HEADERS format is perfect for conveying data on a single record it is inadequate for large and/or multi-record responses. This means that some actions, given the nature of their responses, are not available with HEADERS format &ndash; as is the case with list operations.</p>

<p>The choice of output format is done by appending a dot (<code class="prettyprint">.</code>) followed by the desired format at the end of the request URI. For the default, HEADERS format, however, nothing is appended.</p>

<p>Examples:</p>

<ul>
<li><code class="prettyprint">/drops/xkcd.json</code> (JSON)</li>
<li><code class="prettyprint">/drops/xkcd</code> (HEADERS)</li>
</ul>

<h3 id="input-amp-output-coherence">Input &amp; Output Coherence</h3>

<blockquote>
<p>HEADERS Output Format</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># Request (partial):</span>

POST /note HTTP/1.1
...
<span class="o">(</span>request body<span class="o">)</span>

<span class="c"># Response (partial):</span>

HTTP/1.1 200 OK
x-droplr-code: xkcd
x-droplr-uploadsize: 69
x-droplr-availablespace: 1000
x-droplr-usedspace: 169
...
Content-Length: 0
</code></pre>

<blockquote>
<p>JSON Output Format</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># Request (partial):</span>

POST /note.json HTTP/1.1
...
Content-Type: application/json
Content-Length: 461
...
<span class="o">(</span>request body<span class="o">)</span>

<span class="c"># Response:</span>

HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 78

<span class="o">{</span><span class="s2">"totalSpace"</span>:1073741824,<span class="s2">"usedSpace"</span>:1400519,<span class="s2">"uploadSize"</span>:461,<span class="s2">"code"</span>:<span class="s2">"xkcd"</span>, ...<span class="o">}</span>
</code></pre>

<blockquote>
<p>JSON Output Format with Query Input</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># Request (partial):</span>

GET /drops.json?offset<span class="o">=</span>0&amp;amount<span class="o">=</span>10 HTTP/1.1
...
Content-Length: 0

<span class="c"># Response:</span>

HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 78

<span class="o">{</span><span class="s2">"totalSpace"</span>:1073741824,<span class="s2">"usedSpace"</span>:1400519,<span class="s2">"uploadSize"</span>:461,<span class="s2">"code"</span>:<span class="s2">"xkcd"</span>, ...<span class="o">}</span>
</code></pre>

<p>When executing an operation, keep in mind that the server will give output according to the input. If you access the operation <code class="prettyprint">GET /drops/xkcd</code>, the server expects you to provide input using the HEADERS format and will provide output with the HEADERS format. Unless explicitly noted, data format permutations cannot occur; for example, you can&rsquo;t execute <code class="prettyprint">GET /drops/xkcd</code> with input in HEADERS format and receive data in JSON format.</p>

<p>There are, however, HTTP client libraries that will not allow you to send data along in a GET request. In order to overcome this limitation, all JSON operations that support or require input parameters will also support query parameter input:</p>

<p><code class="prettyprint">GET /drops.json?offset=0&amp;amount=10 HTTP/1.1</code></p>

<p>The following examples illustrate the differences between these output formats for the example of a note upload.</p>

<aside class="notice">
  Requests in the HEADERS format do not require the format type to be appended at the end of the URI (as is the case with all other formats).
</aside>

<h2 id="operations-reference">Operations Reference</h2>

<p>Droplr&rsquo;s API consists of several RESTful operations to create, read and delete drops as well as operations to manage user accounts.</p>

<p>This document provides an extensive listing of these operations, along with their input &amp; output parameters, supported <a href="#data-formats">formats</a>, and special notes.</p>

<h3 id="environments-and-encryption">Environments and Encryption</h3>

<p>Before any application is authorized to hit the production servers, it must go through a staging period on the development environments.</p>

<p>Server endpoints:</p>

<ul>
<li><strong>Production</strong>: https://api.droplr.com (port 443)</li>
<li><strong>Development</strong>: http://dev.droplr.com (port 8069)</li>
</ul>

<p>While encrypted HTTP connections are optional on the development environment, they are mandatory for the production environment &ndash; which doesn&rsquo;t even support non-encrypted connections.</p>

<h3 id="operation-errors">Operation Errors</h3>
<pre class="highlight shell"><code><span class="c"># Example error response</span>

HTTP/1.1 401 Unauthorized
...
x-droplr-errorcode: Authentication.UnknownUser
x-droplr-errordetails: No such user
</code></pre>

<p>The server will use traditional HTTP status codes to convey operation errors or success. However, these are somewhat limited and do not offer a precise cause for the operation failure.</p>

<p>Whenever an operation fails (HTTP status code &gt;= 400), the server will include two headers:</p>

<ul>
<li><p><strong>Error code:</strong> Contains a unique identifier for the cause of the error. It is usually in the format X.Y, X being the high-level action and Y the error identifier, within X. It can be found on the header <code class="prettyprint">x-droplr-errorcode</code>.</p></li>
<li><p><strong>Error details:</strong> Contains a user-friendly english (<code class="prettyprint">en-US</code>) message that can be displayed to the user of the app. It can be found on the header <code class="prettyprint">x-droplr-errordetails</code>.</p></li>
</ul>

<h4 id="common-error-responses">Common Error Responses</h4>

<p>There are a great deal of errors that are common to all operations. The following is a comprehensive list of these errors along with the matching HTTP status code, a description of the cause and the message that is sent in the <code class="prettyprint">x-droplr-errordetails</code> header.</p>

<!-- Request.BlacklistedUserAgent | 403 | The client user agent was blacklisted. Blacklisting user agents is an effective way to block a specific version of an application without deleting its access credentials. Your application may be blacklisted if erratic behavior is detected. Since we assume this is a temporary issue, we convey an error message that warns users to update their application to the latest version. | Please update to the newest version -->

<table><thead>
<tr>
<th>Error Code</th>
<th>Status Code</th>
<th>Cause</th>
<th>Error Message</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Internal.DataAccessError</strong></td>
<td>503</td>
<td>Temporary failure on Droplr&rsquo;s data storage system.</td>
<td>Temporary data access failure when performing operation</td>
</tr>
<tr>
<td><strong>Internal.TooManyRequest</strong></td>
<td>503</td>
<td>Server is under extremely heavy load and will discard some requests in order to keep serving a percentage of those.</td>
<td>Server is under heavy load; please try again later</td>
</tr>
<tr>
<td><strong>Maintenance.GoingDown</strong></td>
<td>503</td>
<td>Server is under maintenance and will be shutdown soon.</td>
<td>Server will be going down for maintenance shortly</td>
</tr>
<tr>
<td><strong>Maintenance.ReadOnly</strong></td>
<td>503</td>
<td>Server is under maintenance and only non-idempotent operations (read-only) will be allowed.</td>
<td>Server is under maintenance; only read operations will be allowed</td>
</tr>
<tr>
<td><strong>Authentication.InvalidAuthHeader</strong></td>
<td>401</td>
<td>Auth header is invalid; please refer to the Auth &amp; auth guide.</td>
<td>Authorization header format is not in conformity with specification</td>
</tr>
<tr>
<td><strong>Authentication.UnknownScheme</strong></td>
<td>401</td>
<td>Authentication scheme is unknown; please refer to the Auth &amp; auth guide.</td>
<td>Authentication scheme not supported: <code class="prettyprint">%SCHEME%</code></td>
</tr>
<tr>
<td><strong>Authentication.InvalidScheme</strong></td>
<td>401</td>
<td>The authentication scheme used was not valid for the requested operation.</td>
<td>Authentication scheme not supported for this action</td>
</tr>
<tr>
<td><strong>Authentication.InvalidSignature</strong></td>
<td>401</td>
<td>The HMAC-SHA1 signature does not match expected value.</td>
<td>HMAC SHA1 signature is invalid</td>
</tr>
<tr>
<td><strong>Authentication.ReplayedSignature</strong></td>
<td>401</td>
<td>The signature generated for the request has recently been used. Make sure the value of the <code class="prettyprint">Date</code> header is being set according to the <a href="#authentication-amp-authorization">auth</a> guide.</td>
<td>Signature has already been used</td>
</tr>
<tr>
<td><strong>Authentication.ClockSkew</strong></td>
<td>401</td>
<td>The client&rsquo;s clock is too far ahead/behind the server&rsquo;s clock.</td>
<td>Date in request (<code class="prettyprint">%REQUEST_DATE%</code>) is too far ahead/behind the server date (<code class="prettyprint">%SERVER_DATE%</code>)</td>
</tr>
<tr>
<td><strong>Authentication.UnknownApplication</strong></td>
<td>401</td>
<td>Application does not have credentials to perform operations on the server.</td>
<td>No such application</td>
</tr>
<tr>
<td><strong>Authentication.UnknownUser</strong></td>
<td>401</td>
<td>User with given identifier does not exist.</td>
<td>No such user</td>
</tr>
<tr>
<td><strong>Authentication.SignatureMismatch</strong></td>
<td>401</td>
<td>Signature is according to spec but result does not match expected. Typically means wrong password.</td>
<td>Invalid password</td>
</tr>
<tr>
<td><strong>Authorization.NoPrivileges</strong></td>
<td>403</td>
<td>Application attempted to execute an operation to which it does not have clearance.</td>
<td>This application has no permissions to execute this action</td>
</tr>
<tr>
<td><strong>Request.InvalidUri</strong></td>
<td>400</td>
<td>Malformed uri and/or query parameters on HTTP request line.</td>
<td>Invalid uri and/or query params</td>
</tr>
<tr>
<td><strong>Request.NoAction</strong></td>
<td>404</td>
<td>No operation matching request URI.</td>
<td>No action at the requested uri</td>
</tr>
<tr>
<td><strong>Request.BodyMustBeEmpty</strong></td>
<td>400</td>
<td>The application sent body for a request that doesn&rsquo;t require body. Server will immediately reply with error and close the connection to avoid unnecessary resource usage.</td>
<td>Request body must be empty</td>
</tr>
<tr>
<td><strong>Request.NoContentLength</strong></td>
<td>400</td>
<td>Client application sent content without specifying a <code class="prettyprint">Content-Lenght</code> header.</td>
<td>This server always requires Content-Length header, even for chunked requests</td>
</tr>
<tr>
<td><strong>Request.ContentTooLarge</strong></td>
<td>400</td>
<td>Client application specified a value that exceeds the acceptable limits (2GB).</td>
<td>Content-Length indicates illegal size (over 2GB)</td>
</tr>
<tr>
<td><strong>Request.NoContentType</strong></td>
<td>400</td>
<td>Request did not bear a <code class="prettyprint">Content-Type</code> header, which is mandatory when the request includes a body.</td>
<td>Content-Type header is mandatory</td>
</tr>
<tr>
<td><strong>Request.ContentLengthMismatch</strong></td>
<td>400</td>
<td>Announced content length (on <code class="prettyprint">Content-Length</code> header) doesn&rsquo;t match actual content length.</td>
<td>Mismatch between announced content length and actual readable data</td>
</tr>
<tr>
<td><strong>Request.NoDateHeader</strong></td>
<td>400</td>
<td>No <code class="prettyprint">Date</code> (or <code class="prettyprint">x-droplr-date</code>) header found on request. This header is always mandatory.</td>
<td>No Date header found in request</td>
</tr>
<tr>
<td><strong>Request.NoAuthorizationHeader</strong></td>
<td>400</td>
<td>No <code class="prettyprint">Authorization</code> header found on request. This header is always mandatory.</td>
<td>No Authorization header found in request</td>
</tr>
<tr>
<td><strong>Request.InvalidJson</strong></td>
<td>400</td>
<td>JSON content in request body could not be correctly decoded.</td>
<td>Failed to parse JSON request body</td>
</tr>
<tr>
<td><strong>Request.UnsupportedDataFormat</strong></td>
<td>400</td>
<td>Client application tried to perform an operation using an invalid data format (e.g. .xml).</td>
<td>Unsupported request data format: <code class="prettyprint">%DATA_FORMAT%</code></td>
</tr>
<tr>
<td><strong>Request.NoJson</strong></td>
<td>400</td>
<td>Server was expecting JSON content in request body but no content (or non-JSON content) was found.</td>
<td>A JSON body is required, along with content Content-Type header set</td>
</tr>
<tr>
<td><strong>Request.BadContentType</strong></td>
<td>400</td>
<td>Value of the header <code class="prettyprint">Content-Type</code> is not a valid mime type.</td>
<td>Unable to parse Content-Type header value: <code class="prettyprint">%CONTENT_TYPE%</code></td>
</tr>
<tr>
<td><strong>Request.ChunksNotAcceptable</strong></td>
<td>400</td>
<td>Chunked transfer not acceptable for the requested operation.</td>
<td>Chunked requests not accepted for this action</td>
</tr>
<tr>
<td><strong>Request.PipelineAbuse</strong></td>
<td>400</td>
<td>Client application exceeded maximum allowed pipelined requests for a single connection.</td>
<td>Too many pipelined requests</td>
</tr>
<tr>
<td><strong>Request.BlacklistedUserAgent</strong></td>
<td>403</td>
<td>The client user agent was blacklisted. Blacklisting user agents is an effective way to block a specific version of an application without deleting its access credentials. Your application may be blacklisted if erratic behavior is detected. Since we assume this is a temporary issue, we convey an error message that warns users to update their application to the latest version.</td>
<td>Please update to the newest version</td>
</tr>
</tbody></table>

<p>The following errors apply only to drop creation operations (shorten link, create note and upload file).</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Status Code</th>
<th>Cause</th>
<th>Error Message</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CreateDrop.TooManyUploads</strong></td>
<td>503</td>
<td>Too many concurrent uploads and the server needs to reject some in order to maintain an acceptable bandwidth for all uploads.</td>
<td>Cannot process your request at this time, please try again later</td>
</tr>
<tr>
<td><strong>CreateDrop.MaxSizeExceeded</strong></td>
<td>400</td>
<td>The maximum upload size was exceeded. Drops have a size limit based on type and the user&rsquo;s account</td>
<td>Max upload size limit exceeded: <code class="prettyprint">%SIZE%</code></td>
</tr>
<tr>
<td><strong>CreateDrop.NoSpace</strong></td>
<td>507</td>
<td>The user has hit the limits of his or her account and cannot upload files until he clears out some space.</td>
<td>Used <code class="prettyprint">%USED%</code> of available <code class="prettyprint">%AVAILABLE%</code></td>
</tr>
<tr>
<td><strong>CreateDrop.ContentTypeMustMatch</strong></td>
<td>400</td>
<td>The value in <code class="prettyprint">Content-Type</code> header does not match any of the values in the content type white list.</td>
<td>Content-Type header is mandatory and must match <code class="prettyprint">%LIST%</code></td>
</tr>
<tr>
<td><strong>CreateDrop.InvalidPrivacy</strong></td>
<td>400</td>
<td>The value in <code class="prettyprint">privacy</code> query param or <code class="prettyprint">x-droplr-privacy</code> custom header is not a valid privacy value.</td>
<td>Invalid privacy value</td>
</tr>
<tr>
<td><strong>CreateDrop.InvalidPrivacy</strong></td>
<td>400</td>
<td>The value in <code class="prettyprint">password</code> query param or <code class="prettyprint">x-droplr-password</code> custom header is not a valid password value; it either has invalid length (too short or too long) or contains invalid characters.</td>
<td>Invalid password value</td>
</tr>
</tbody></table>

<h4 id="error-internationalization">Error Internationalization</h4>
<pre class="highlight shell"><code><span class="o">[</span>English dictionary]
<span class="o">(</span>K: Authentication.UnknownUser, V: <span class="s2">"There is no such user"</span><span class="o">)</span>

<span class="o">[</span>Portuguese dictionary]
<span class="o">(</span>K: Authentication.UnknownUser, V: <span class="s2">"O utilizador não existe"</span><span class="o">)</span>
</code></pre>

<p>The <code class="prettyprint">error code</code> property is useful to internationalize your application. By creating multiple dictionaries (also commonly referred to as &lsquo;map&rsquo;) where the keys are all the values for the <code class="prettyprint">error code</code> property and the values are translations, you can show your users a detailed localized message for every error that happens when interacting with the Droplr server.</p>

<h3 id="setting-a-meaningful-user-agent-header-value">Setting a Meaningful User-Agent Header Value</h3>

<p>Each application will be uniquely defined by its public key, which will be present in the signature it sends with each request (the value of the <code class="prettyprint">Authorization</code> header). This identifier will always be the same even though the application version will likely change over time.</p>

<p>In order for Droplr&rsquo;s API servers to be able to distinguish between different versions of the same application, the <code class="prettyprint">User-Agent</code> header should be set with a meaningful value.</p>

<p>A common and useful pattern is:</p>

<p><code class="prettyprint">User-Agent: &lt;Network library name&gt;/&lt;major.minor(.build)&gt; &lt;App name&gt;/&lt;major.minor(.build)&gt;</code></p>

<p>As an example, Droplr&rsquo;s Mac app using <code class="prettyprint">DroplrKit</code> would have the following user agent:</p>

<p><code class="prettyprint">User-Agent: DroplrService.objc/1.0 DroplrMac/2.0.5</code></p>

<p>This is merely an example; what matters is that at least the application version should always be present on this header. Droplr&rsquo;s API servers have user agent blacklisting which will be used if erratic behavior is detected by a specific version of an application &ndash; the server will reply with a message telling the client to upgrade to the latest version.</p>

<p>If the application does not update its <code class="prettyprint">User-Agent</code> header according to its version, multiple versions may end up being blocked.</p>

<p>If you&rsquo;re develping an SDK that abstracts the network communication with Droplr&rsquo;s API Servers, your library should offer its users the possibility to append information about their application. For instance, <code class="prettyprint">DroplrKit</code> always sends its name and version but requires each application to provide its own identification string.</p>

<p><code class="prettyprint">DroplrService.objc/1.0 %APP_IDENTIFIER%</code></p>

<h3 id="drop-creation-operations">Drop Creation Operations</h3>

<p>Droplr&rsquo;s API server fully supports the 100-Continue header (RFC <em>TODO</em>). If possible, your client should implement this directive, as it&rsquo;ll save both time and bandwidth.</p>

<p>In short, The <code class="prettyprint">100-Continue</code> is a value for the <code class="prettyprint">Expect</code> header sent by the client when uploading data. When this header is set, the client will send the request headers and wait for a provisional response from the server (an <code class="prettyprint">HTTP 100 Continue</code> response) before actually sending the data. This will enable the Droplr API Server to properly validate the request before receiving data and prepare to accomodate the incoming file.</p>

<p>Most modern HTTP implementations support this feature out of the box by simply setting the value <code class="prettyprint">100-Continue</code> on the <code class="prettyprint">Expects</code> header or via some other well-known request property.</p>

<p>When this feature is not used and the upload does not pass validation, it will be interrupted before all the data is sent through. This will likely cause problems with faulty HTTP implementations.</p>

<h3 id="drop-privacy">Drop Privacy</h3>

<p>Droplr supports three privacy modes, which reflects how drops are visible via their codes.</p>

<aside class="notice">
  Drop privacy concerns only non-owner viewers of the drop so your application does not need any special handling when performing operations, such as <strong>Read drop</strong> or <strong>List drops</strong>. Drop privacy is used by Droplr&rsquo;s webapp to determine how to display (or how <em>not</em> to display) a given drop.
</aside>

<p>No matter what the privacy mode is upon its creation, the drop will <em>always</em> have default values for all the fields mentioned in the sections below (<strong>short code</strong>, <strong>obscure code</strong> and <strong>password</strong>). Beware that older drops (pre-privacy era) may not include <strong>password</strong> field when retrieved so never assume password is always present.</p>

<h4 id="public">Public</h4>

<p>This is the default mode, reflected by the value <code class="prettyprint">PUBLIC</code> in the <code class="prettyprint">privacy</code> JSON field or the <code class="prettyprint">x-droplr-privacy</code> Custom HTTP header.</p>

<p>Drops configured as <code class="prettyprint">PUBLIC</code> are accessible either by their <strong>short code</strong> (e.g. <code class="prettyprint">http://d.pr/xkcd</code>) or their <strong>obscure code</strong> (covered up next).</p>

<p>No special handling is required and apps may use the value of the shortlink field (<code class="prettyprint">shortlink</code> JSON field or <code class="prettyprint">x-droplr-shortlink</code>) in a drop directly.</p>

<p><strong>Short code</strong> is an alphanumeric string that fits the pattern <code class="prettyprint">[a-zA-Z0-9]+</code>.</p>

<h4 id="obscure">Obscure</h4>

<p>When a drop is configured to use its obscure code, it will only be accessible by its 16-char-long code, thus making it significantly harder to guess. A drop must be handled as obscure when the value <code class="prettyprint">OBSCURE</code> is present in the <code class="prettyprint">privacy</code> JSON field or the <code class="prettyprint">x-droplr-privacy</code> Custom HTTP header.</p>

<p>Drops configured as <code class="prettyprint">OBSCURE</code> are accessible <em>only</em> by their <strong>obscure code</strong> (e.g.: <code class="prettyprint">http://d.pr/aF03GzuIqL0OeXsA</code>) and will return 404 (<code class="prettyprint">Not found</code>) if someone tries to access them with their <strong>short code</strong>.</p>

<p>Since the server will automatically use the <strong>obscure code</strong> in the shortlink field (<code class="prettyprint">shortlink</code> JSON field or <code class="prettyprint">x-droplr-shortlink</code> Custom HTTP header) when returning drops, no special handling is required and applications may use this value directly.</p>

<p><strong>Obscure code</strong> is an alphanumeric string that fits the pattern <code class="prettyprint">[a-zA-Z0-9]{16}</code>.</p>

<h4 id="private">Private</h4>

<p>Drops configured as private can either be viewed by their <strong>short code</strong> or their <strong>obscure code</strong> but will always require a password to be viewed. A drop must be handled as private when the value <code class="prettyprint">PRIVATE</code> is present in the <code class="prettyprint">privacy</code> JSON field or the <code class="prettyprint">x-droplr-privacy</code> Custom HTTP header.</p>

<p>When configured to private mode, the server will use the <strong>short code</strong> in the shortlink field (<code class="prettyprint">shortlink</code> JSON field or <code class="prettyprint">x-droplr-shortlink</code>) when returning drops, but in order for the shortlink to be directly accessibly (i.e. copy+paste accessible) you must append a forward-slash and the value of the password field (<code class="prettyprint">password</code> JSON field or <code class="prettyprint">x-droplr-password</code> Custom HTTP header).</p>

<p>For instance, a drop with <strong>short code</strong> <code class="prettyprint">xkcd</code> and <strong>password</strong> <code class="prettyprint">verySafePassword</code> would have its shortlink returned as <code class="prettyprint">http://d.pr/xkcd</code> and would be directly accessible with <code class="prettyprint">http://d.pr/xkcd/verySafePassword</code>.</p>

<aside class="warning">
  Thumbnail shortlink modifiers (trailing <code>-</code>, <code>/thumbnail</code>, <code>/small</code> and <code>/medium</code>) as well as direct content access modifiers (trailing <code>+</code>) follow password-protected drop convetions too! If you were to fetch a thumbnail for an image with code <code>xkcd</code> and shortlink <code>http://d.pr/i/xkcd</code> by appending a trailing minus sign (<code>http://d.pr/i/xkcd-</code>), you would have to use <code>http://d.pr/i/xkcd/password-</code> instead.  
</aside>

<p>If the password is not appended to the shortlink (thus creating an <strong>accessible link</strong>), the viewer will be presented with a screen requiring password input. This may be desired behavior if you wish to send the link for a drop via one transmission medium and the password via another.</p>

<p><strong>Password</strong> is an alphanumeric string that fits the pattern <code class="prettyprint">[a-zA-Z0-9]{4,32}</code>, although by default, an 8-char-long password is assigned. The character restriction for the password (alphanumeric chars only) is required to ensure that the drop is always accessible via a valid URL, since special chars would potentially break browser implementations and thus rendering the drop inaccessible.</p>

<h3 id="accessible-drop-urls">Accessible Drop URLs</h3>
<pre class="highlight plaintext"><code>String accessibleUrl(Drop drop) {
    switch (drop.privacy) {
        case "PRIVATE":
            return drop.shortlink + "/" + drop.password;

        case "PUBLIC":
        case "OBSCURE":
        case default:
            return drop.shortlink;
}
</code></pre>

<p>With any arbitrary language, assuming <code class="prettyprint">Drop</code> represents a properly parsed drop response from the server, this algorithm will ensure that an accessible url is generated for a drop.</p>

<h2 id="actions">Actions</h2>

<h3 id="shorten-link">Shorten Link</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight shell"><code>POST /links HTTP/1.0
...
x-droplr-privacy: PRIVATE
x-droplr-password: quagmire
...
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 201 Created
x-droplr-code: xkcd
x-droplr-createdat: 1304642398598
x-droplr-type: LINK
x-droplr-title: QSBmaW5lIG5vdGU=
x-droplr-size: 11
x-droplr-usedspace: 11
x-droplr-shortlink: http://d.pr/xkcd
x-droplr-totalspace: 10000
Content-Length: 0

HTTP/1.1 201 Created
Content-Type: application/json; encoding=utf-8
Content-Length: 211
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"totalSpace"</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"http://droplr.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"usedSpace"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1304642741028</span><span class="p">,</span><span class="w">
  </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"xkcd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"LINK"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"shortlink"</span><span class="p">:</span><span class="s2">"http://d.pr/xkcd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"size"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nt">"privacy"</span><span class="p">:</span><span class="s2">"PUBLIC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"obscureCode"</span><span class="p">:</span><span class="s2">"xkcdXKCDxkcdXKCD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a short link to a long link.</p>

<p><strong>Supported formats:</strong> HEADERS, JSON</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">POST /links</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Header Key</th>
<th>Query Parameter</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Drop privacy</strong></td>
<td>The privacy with which this drop should be created, overriding default account settings.</td>
<td><code class="prettyprint">x-droplr-privacy</code></td>
<td><code class="prettyprint">privacy</code></td>
</tr>
<tr>
<td><strong>Drop password</strong></td>
<td>The password with which this drop should be created, overriding default password generation.</td>
<td><code class="prettyprint">x-droplr-password</code></td>
<td><code class="prettyprint">password</code></td>
</tr>
</tbody></table>

<h5 id="output-parameters">Output Parameters</h5>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Header Key</th>
<th>JSON Field</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Drop code</strong></td>
<td>The code for the drop.</td>
<td><code class="prettyprint">x-droplr-code</code></td>
<td><code class="prettyprint">code</code></td>
</tr>
<tr>
<td><strong>Created at</strong></td>
<td>The timestamp, since UTC (in milliseconds), when the drop was created.</td>
<td><code class="prettyprint">x-droplr-createdat</code></td>
<td><code class="prettyprint">createdAt</code></td>
</tr>
<tr>
<td><strong>Type</strong></td>
<td>The type of drop (LINK, NOTE, IMAGE, VIDEO, AUDIO, FILE).</td>
<td><code class="prettyprint">x-droplr-type</code></td>
<td><code class="prettyprint">type</code></td>
</tr>
<tr>
<td><strong>Title</strong></td>
<td>The title of the drop.</td>
<td><code class="prettyprint">x-droplr-title</code> header &ndash; Base64 encoded (in order to preserve UTF-8 char</td>
<td><code class="prettyprint">title</code></td>
</tr>
<tr>
<td><strong>Size</strong></td>
<td>The size of the drop, in bytes.</td>
<td><code class="prettyprint">x-droplr-size</code></td>
<td><code class="prettyprint">size</code></td>
</tr>
<tr>
<td><strong>Privacy</strong></td>
<td>The privacy mode with which the drop was created. Possible values are <code class="prettyprint">PUBLIC</code>, <code class="prettyprint">PRIVATE</code> or <code class="prettyprint">OBSCURE</code>.</td>
<td><code class="prettyprint">x-droplr-privacy</code></td>
<td><code class="prettyprint">privacy</code></td>
</tr>
<tr>
<td><strong>Password</strong></td>
<td>The password with which the drop was created. Will only be present of drop privacy was set to <code class="prettyprint">PRIVATE</code>. Password is sent as plain text (reminder: the HTTP connection is encrypted) as drop passwords can only contain characters allowed in a URL path component</td>
<td><code class="prettyprint">x-droplr-password</code></td>
<td><code class="prettyprint">privacy</code></td>
</tr>
<tr>
<td><strong>Obscure code</strong></td>
<td>A hard-to-guess 16 char unique string that maps to this drop. Drops can be accessed either via short code or obscure code. Drops configured to use <code class="prettyprint">OBSCURE</code> privacy can only be accessed via obscure code.</td>
<td><code class="prettyprint">x-droplr-obscurecode</code></td>
<td><code class="prettyprint">obscureCode</code></td>
</tr>
<tr>
<td><strong>Shortlink</strong></td>
<td>The shortlink where the drop is available at; it&rsquo;s a concatenation of the user&rsquo;s custom domain (if set) or Droplr&rsquo;s default domain and the drop code.</td>
<td><code class="prettyprint">x-droplr-shortlink</code></td>
<td><code class="prettyprint">shortlink</code></td>
</tr>
<tr>
<td><strong>Used space</strong></td>
<td>The total used space for the account creating the drop, in bytes.</td>
<td><code class="prettyprint">x-droplr-usedspace</code></td>
<td><code class="prettyprint">usedSpace</code></td>
</tr>
<tr>
<td><strong>Total space</strong></td>
<td>The total space availabe for the account creating the drop, in bytes.</td>
<td><code class="prettyprint">x-droplr-totalspace</code></td>
<td><code class="prettyprint">totalSpace</code></td>
</tr>
</tbody></table>

<h5 id="errors">Errors</h5>

<table><thead>
<tr>
<th>Error Code</th>
<th>Status Code</th>
<th>Cause</th>
<th>Error Message</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CreateDrop.InvalidUrl</strong></td>
<td>400</td>
<td>The link to shorten is an invalid link.</td>
<td>Invalid URL</td>
</tr>
<tr>
<td><strong>CreateDrop.RecursiveLink</strong></td>
<td>400</td>
<td>The link to shorten is a link to one of Droplr&rsquo;s domains (or subdomains).</td>
<td>Cannot shorten links to Droplr&rsquo;s urls</td>
</tr>
</tbody></table>

<h5 id="notes">Notes</h5>

<ul>
<li>The title for the drop generated with this operation will be the original link itself. If the target is a webpage, the title will eventually be updated the the title of the webpage &ndash; assuming there is one.</li>
<li>This action does not allow shortening links to Droplr&rsquo;s domains (<code class="prettyprint">droplr.com</code> and <code class="prettyprint">d.pr</code>) or its subdomains.</li>
</ul>

<h3 id="create-note">Create Note</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight plaintext"><code>POST /notes HTTP/1.1
...
Content-Type: text/plain
...

POST /notes HTTP/1.1
...
Content-Type: text/code
x-droplr-privacy: PRIVATE
x-droplr-password: quahog
...
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 201 Created
x-droplr-code: xkcd
x-droplr-createdat: 1304642398598
x-droplr-type: NOTE
x-droplr-title: QSBmaW5lIG5vdGU=
x-droplr-size: 11
x-droplr-usedspace: 11
x-droplr-shortlink: http://d.pr/xkcd
x-droplr-totalspace: 10000
Content-Length: 0

HTTP/1.1 201 Created
Content-Type: application/json; encoding=utf-8
Content-Length: 211
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"totalSpace"</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"http://droplr.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"usedSpace"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1304642741028</span><span class="p">,</span><span class="w">
  </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"xkcd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"NOTE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"shortlink"</span><span class="p">:</span><span class="s2">"http://d.pr/xkcd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"size"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nt">"privacy"</span><span class="p">:</span><span class="s2">"PUBLIC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"obscureCode"</span><span class="p">:</span><span class="s2">"xkcdXKCDxkcdXKCD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a text based document and a return a short link for it</p>

<p><strong>Supported formats:</strong> HEADERS, JSON
<strong>Variants:</strong> Plain text, Markdown, Textile, Code, etc</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">POST /notes</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Type of note</strong></td>
<td>The type of note is defined by setting the <code class="prettyprint">Content-Type</code> header to <code class="prettyprint">text/plain</code>, <code class="prettyprint">text/markdown</code>, <code class="prettyprint">text/textile</code> or <code class="prettyprint">text/code</code>. As long as the <code class="prettyprint">Content-Type</code> header is set to a mime type with main type being &ldquo;text&rdquo;, the drop will be recognized as a note. The mime subtype is merely a hint so that applications viewing this drop can apply text formatting and/or styling (such as code markup or markdown-to-html rendering).</td>
</tr>
</tbody></table>

<p>All other input parameters are the same as the <a href="#shorten-link">shorten link</a> action.</p>

<h5 id="output-parameters">Output Parameters</h5>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Header Key</th>
<th>JSON Field</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Variant</strong></td>
<td>The variant is a hint to applications on how to display the drop&rsquo;s content and/or its icon. Beware that this is basically a free-form field and can be set to any value by other applications.</td>
<td><code class="prettyprint">x-droplr-variant</code></td>
<td><code class="prettyprint">variant</code></td>
</tr>
</tbody></table>

<p>All other output parameters are the same as the <a href="#shorten-link">shorten link</a> action.</p>

<h5 id="notes">Notes</h5>

<ul>
<li>The title of the drop will be based on the contents of the note; its first 100 characters with newlines replaced by spaces.</li>
</ul>

<h3 id="upload-file">Upload File</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight plaintext"><code>POST /files HTTP/1.1
...
x-droplr-filename: QSBmaW5lIG5vdGU=
...

POST /files HTTP/1.1
...
x-droplr-filename: QSBmaW5lIG5vdGU=
x-droplr-privacy: PRIVATE
x-droplr-password: wekapaw
...
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 201 Created
x-droplr-code: xkcd
x-droplr-createdat: 1304642398598
x-droplr-type: FILE
x-droplr-title: QSBmaW5lIG5vdGU=
x-droplr-size: 11
x-droplr-usedspace: 11
x-droplr-shortlink: http://d.pr/xkcd
x-droplr-totalspace: 10000
Content-Length: 0

HTTP/1.1 201 Created
Content-Type: application/json; encoding=utf-8
Content-Length: 211
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"totalSpace"</span><span class="p">:</span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"http://droplr.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"usedSpace"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1304642741028</span><span class="p">,</span><span class="w">
  </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"xkcd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"FILE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"shortlink"</span><span class="p">:</span><span class="s2">"http://d.pr/xkcd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"size"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nt">"privacy"</span><span class="p">:</span><span class="s2">"PUBLIC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"obscureCode"</span><span class="p">:</span><span class="s2">"xkcdXKCDxkcdXKCD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Upload a file and return a short link for its location</p>

<p><strong>Supported formats:</strong> HEADERS, JSON
<strong>Variants:</strong> Image, Audio, Video, File</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">POST /files</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Header Key</th>
<th>Query Parameter</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Filename</strong></td>
<td>The name under which the file should be stored. This property is always mandatory and can either be sent with query params or custom headers (query params take precedence). It must be sent as a query param or a header since the body of the request is reserved for the upload data.</td>
<td><code class="prettyprint">x-droplr-filename</code></td>
<td><code class="prettyprint">filename</code></td>
</tr>
</tbody></table>

<p>All other input parameters are the same as the <a href="#create-note">create note</a> action.</p>

<h5 id="output-parameters">Output Parameters</h5>

<p>All output parameters are the same as the <a href="#create-note">create note</a> action.</p>

<h5 id="errors">Errors</h5>

<table><thead>
<tr>
<th>Error Code</th>
<th>Status Code</th>
<th>Cause</th>
<th>Error Message</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CreateDrop.RemoteStorageOperationFailed</strong></td>
<td>500</td>
<td>There was an error storing the file&rsquo;s contents.</td>
<td>Error storing drop contents</td>
</tr>
<tr>
<td><strong>CreateDrop.MissingFilename</strong></td>
<td>400</td>
<td>Request did not bear a <code class="prettyprint">x-droplr-filename</code> header with the name of the file.</td>
<td>Missing filename; please set query parameter or use custom header</td>
</tr>
<tr>
<td><strong>CreateDrop.FilenameNotBase64</strong></td>
<td>400</td>
<td>The server could not decode the contents of the header <code class="prettyprint">x-droplr-filename</code> as Base 64.</td>
<td>Filename header must be base64 encoded</td>
</tr>
</tbody></table>

<h5 id="notes">Notes</h5>

<ul>
<li>The contents of the <code class="prettyprint">x-droplr-filename</code> header <strong>MUST NOT</strong> be URL escaped and <strong>MUST</strong> be Base64 encoded. Since HTTP headers must be in US ASCII encoding, UTF-8 characters are not supported. Encoding UTF-8 text to Base64 (and then decoding at the server side) ensures that UTF-8 characters are supported as the drop&rsquo;s title.</li>
<li>The filename header is always mandatory, whether the action is executed with JSON or HEADERS data format.</li>
</ul>

<h3 id="read-drop">Read Drop</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /drops/xkcd HTTP/1.1

</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 201 Created
x-droplr-code: xkcd
x-droplr-createdat: 1304642398598
x-droplr-type: FILE
x-droplr-title: QSBmaW5lIG5vdGU=
x-droplr-size: 11
x-droplr-shortlink: http://d.pr/xkcd
Content-Length: 0

HTTP/1.1 201 Created
Content-Type: application/json; encoding=utf-8
Content-Length: 211
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"http://droplr.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1304642741028</span><span class="p">,</span><span class="w">
  </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"xkcd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"FILE"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"shortlink"</span><span class="p">:</span><span class="s2">"http://d.pr/xkcd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"size"</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nt">"privacy"</span><span class="p">:</span><span class="s2">"PUBLIC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"obscureCode"</span><span class="p">:</span><span class="s2">"xkcdXKCDxkcdXKCD"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Read the contents of a previously created drop</p>

<p><strong>Supported formats:</strong> HEADERS, JSON</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">GET /drops/:code</code></p>

<p>The only input parameter is the drop <code class="prettyprint">code</code> supplied in the URL; e.g. <code class="prettyprint">GET /drops/xkcd</code>.</p>

<h5 id="output-parameters">Output Parameters</h5>

<p>All output parameters are the same as <a href="#upload-file">upload file</a> except for <code class="prettyprint">usedSpace</code> and <code class="prettyprint">totalSpace</code>, which are not present in the response to this request.</p>

<h5 id="errors">Errors</h5>

<table><thead>
<tr>
<th>Error Code</th>
<th>Status Code</th>
<th>Cause</th>
<th>Error Message</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ReadDrop.NoDrop</strong></td>
<td>404</td>
<td>Request specified a drop code that does not exist.</td>
<td>No such drop</td>
</tr>
<tr>
<td><strong>ReadDrop.NotOwner</strong></td>
<td>403</td>
<td>Request specified a drop code that is not owned by the user whose credentials were used to sign the request.</td>
<td>You&rsquo;re not the other of that drop</td>
</tr>
</tbody></table>

<h5 id="notes">Notes</h5>

<ul>
<li>Drops can only be read by their creators. If you request details on a drop not owned by the credentials with which you sign the request, the server will return an unauthorized response.</li>
</ul>

<h3 id="list-drops">List Drops</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"startIndex"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"link"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nt">"since"</span><span class="p">:</span><span class="mi">1299648278321</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="p">{</span><span class="w">
  </span><span class="nt">"until"</span><span class="p">:</span><span class="mi">1299648278321</span><span class="p">,</span><span class="w">
  </span><span class="nt">"sortBy"</span><span class="p">:</span><span class="s2">"VIEWS"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"order"</span><span class="p">:</span><span class="s2">"ASC"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 200 OK
Content-Type: application/json; encoding=utf-8
Content-Length: ...
</code></pre>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"content"</span><span class="p">:</span><span class="s2">"http://redis.io"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"http://redis.io"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"obscureCode"</span><span class="p">:</span><span class="s2">"POxqReCZlYk14iN6"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"views"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1333505121880</span><span class="p">,</span><span class="w">
    </span><span class="nt">"privacy"</span><span class="p">:</span><span class="s2">"PUBLIC"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lastAccess"</span><span class="p">:</span><span class="mi">1333505121880</span><span class="p">,</span><span class="w">
    </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"xkcd"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"LINK"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"shortlink"</span><span class="p">:</span><span class="s2">"http://d.pr/xkcd"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"size"</span><span class="p">:</span><span class="mi">15</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"content"</span><span class="p">:</span><span class="s2">"a very long note that will be truncate..."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="s2">"a note"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"obscureCode"</span><span class="p">:</span><span class="s2">"XslQ13B12Qk14DN6"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"views"</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span><span class="w">
    </span><span class="nt">"createdAt"</span><span class="p">:</span><span class="mi">1333505161880</span><span class="p">,</span><span class="w">
    </span><span class="nt">"privacy"</span><span class="p">:</span><span class="s2">"PRIVATE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"password"</span><span class="p">:</span><span class="s2">"lePass"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"lastAccess"</span><span class="p">:</span><span class="mi">1333505121880</span><span class="p">,</span><span class="w">
    </span><span class="nt">"code"</span><span class="p">:</span><span class="s2">"xkce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="s2">"NOTE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"variant"</span><span class="p">:</span><span class="s2">"plain"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"shortlink"</span><span class="p">:</span><span class="s2">"http://d.pr/xkce"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"size"</span><span class="p">:</span><span class="mi">1500</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Retrieve a list of previously created drops with the possibility to combine filters</p>

<p><strong>Supported formats:</strong> JSON</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">GET /drops</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Header Key</th>
<th>Query Parameter</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Offset (optional, defaults to 0)</strong></td>
<td>The drop index at which the list should start. Useful for pagination, the meaning of index zero depends on the sort order (which defaults to latest-drops-first). See the <strong>Order</strong> parameter.</td>
<td><code class="prettyprint">offset</code></td>
<td><code class="prettyprint">offset</code></td>
</tr>
<tr>
<td><strong>Amount (optional, defaults to 10)</strong></td>
<td>The amount of drops to retrieve. This value will be capped by the server if too many drops are requested.</td>
<td><code class="prettyprint">amount</code></td>
<td><code class="prettyprint">amount</code></td>
</tr>
<tr>
<td><strong>Type (optional, defaults to ALL)</strong></td>
<td>Filter by type of drop.</td>
<td><code class="prettyprint">type</code></td>
<td><code class="prettyprint">type</code></td>
</tr>
<tr>
<td><strong>Sort by (optional, defaults to <code class="prettyprint">CREATION</code>)</strong></td>
<td>Sort the retrieved drops by this field.</td>
<td><code class="prettyprint">sortBy</code></td>
<td><code class="prettyprint">sortBy</code></td>
</tr>
<tr>
<td><strong>Order (optional, defaults to <code class="prettyprint">DESC</code>)</strong></td>
<td>The order by which drops should be retrieved.</td>
<td><code class="prettyprint">order</code></td>
<td><code class="prettyprint">order</code></td>
</tr>
<tr>
<td><strong>Since timestamp (optional)</strong></td>
<td>List all drops created after a given timestamp, in milliseconds elapsed since UTC.</td>
<td><code class="prettyprint">since</code></td>
<td><code class="prettyprint">since</code></td>
</tr>
<tr>
<td><strong>Until timestamp (optional)</strong></td>
<td>List all drops created until a given timestamp, in milliseconds elapsed since UTC.</td>
<td><code class="prettyprint">until</code></td>
<td><code class="prettyprint">until</code></td>
</tr>
</tbody></table>

<h5 id="output-parameters">Output Parameters</h5>

<p>A list with drop information. Each entry in this list has the same format and parameters as the <a href="#read-drop">read drop</a> action, except that the content for notes will be truncated (to avoid very large data transfers).</p>

<h5 id="notes">Notes</h5>

<ul>
<li>This action will only return drops created by the user account whose credentials were used to authenticate the request.</li>
<li>Acceptable values for <strong>Type</strong> input parameter are <code class="prettyprint">LINK</code>, <code class="prettyprint">NOTE</code>, <code class="prettyprint">IMAGE</code>, <code class="prettyprint">AUDIO</code>, <code class="prettyprint">VIDEO</code> and <code class="prettyprint">FILE</code>.</li>
<li>Acceptable values for the <strong>Sort by</strong> criteria are <code class="prettyprint">CREATION</code> (default), <code class="prettyprint">CODE</code>, <code class="prettyprint">TITLE</code>, <code class="prettyprint">SIZE</code>, <code class="prettyprint">ACTIVITY</code> and <code class="prettyprint">VIEWS</code>.</li>
<li>Acceptable values for the <strong>Sort order</strong> criterial are <code class="prettyprint">ASC</code> (for ascending) and <code class="prettyprint">DESC</code> (for descending).</li>
</ul>

<h3 id="delete-drop">Delete Drop</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE /drops/xkcd HTTP/1.1

</code></pre>

<p>Delete a previously created drop</p>

<p><strong>Supported formats:</strong> HEADERS (there is no output, so defaults to HEADERS)</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">DELETE /drops/:code</code></p>

<p>The only input parameter is the drop <code class="prettyprint">code</code> supplied in the URL; e.g. <code class="prettyprint">DELETE /drops/xkcd</code>.</p>

<h5 id="output-parameters">Output Parameters</h5>

<p>N/A</p>

<h5 id="errors">Errors</h5>

<table><thead>
<tr>
<th>Error Code</th>
<th>Status Code</th>
<th>Cause</th>
<th>Error Message</th>
</tr>
</thead><tbody>
<tr>
<td><strong>DeleteDrop.NoDrop</strong></td>
<td>404</td>
<td>Drop for specified code does not exist.</td>
<td>No such drop</td>
</tr>
<tr>
<td><strong>DeleteDrop.NotOwner</strong></td>
<td>403</td>
<td>Request specified a drop for deletion that is not owned by the user whose credentials were used to sign the request.</td>
<td>You&rsquo;re not the owner of that drop</td>
</tr>
<tr>
<td><strong>DeleteDrop.AlreadyDeleted</strong></td>
<td>410</td>
<td>Request specified a drop for deletion that has already been deleted.</td>
<td>Record already deleted</td>
</tr>
</tbody></table>

<h5 id="notes">Notes</h5>

<ul>
<li>This action will only delete drops created by the user account whose credentials were used to authenticate the request.</li>
</ul>

<h3 id="read-account-details">Read Account Details</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight plaintext"><code>GET /account HTTP/1.1
</code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieve information of a given account</p>

<p><strong>Supported formats:</strong> HEADERS, JSON</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">GET /account</code></p>

<h5 id="output-parameters">Output Parameters</h5>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Header Key</th>
<th>JSON Field</th>
</tr>
</thead><tbody>
<tr>
<td><strong>User id</strong></td>
<td>The unique user id assigned to this account.</td>
<td><code class="prettyprint">x-droplr-id</code></td>
<td><code class="prettyprint">id</code></td>
</tr>
<tr>
<td><strong>Created at</strong></td>
<td>The POSIX timestamp (in milliseconds) when this account was created.</td>
<td><code class="prettyprint">x-droplr-createdat</code></td>
<td><code class="prettyprint">createdAt</code></td>
</tr>
<tr>
<td><strong>Type</strong></td>
<td>The type of account (PRO, REGULAR).</td>
<td><code class="prettyprint">x-droplr-type</code></td>
<td><code class="prettyprint">type</code></td>
</tr>
<tr>
<td><strong>Subscription end</strong></td>
<td>The exact date of the Pro subscription expiration, in milliseconds elapsed since UTC. This value will be present if <strong>Type</strong> is <code class="prettyprint">PRO</code>.</td>
<td><code class="prettyprint">x-droplr-subscriptionend</code></td>
<td><code class="prettyprint">subscriptionEnd</code></td>
</tr>
<tr>
<td><strong>Max upload size</strong></td>
<td>The maximum size for file uploads, depends on user account. Applications should use this value to test whether an upload can be performed before performing the upload.</td>
<td><code class="prettyprint">x-droplr-maxuploadsize</code></td>
<td><code class="prettyprint">uploadSize</code></td>
</tr>
<tr>
<td><strong>Used space</strong></td>
<td>The total used space by this user.</td>
<td><code class="prettyprint">x-droplr-usedspace</code></td>
<td><code class="prettyprint">usedSpace</code></td>
</tr>
<tr>
<td><strong>Email</strong></td>
<td>The user&rsquo;s current email.</td>
<td><code class="prettyprint">x-droplr-email</code></td>
<td><code class="prettyprint">email</code></td>
</tr>
<tr>
<td><strong>Use custom domain</strong></td>
<td>A flag that indicates what type of domain should be used (if <strong>Custom domain</strong> property is set).</td>
<td><code class="prettyprint">x-droplr-domaintype</code></td>
<td><code class="prettyprint">domainType</code></td>
</tr>
<tr>
<td><strong>Custom domain</strong></td>
<td>A custom domain to use when returning shortlinks for drops, if the <strong>Use custom domain</strong> flag is set.</td>
<td><code class="prettyprint">x-droplr-domain</code></td>
<td><code class="prettyprint">domain</code></td>
</tr>
<tr>
<td><strong>Use root redirect</strong></td>
<td>A flag that indicates whether root redirects should be used when hitting the custom domain without a drop code. This property only makes sense if both <strong>Custom domain</strong> and <strong>Root redirect</strong> properties are set.</td>
<td><code class="prettyprint">x-droplr-userootredirect</code></td>
<td><code class="prettyprint">useRootRedirect</code></td>
</tr>
<tr>
<td><strong>Root redirect</strong></td>
<td>Where to redirect HTTP requests to the custom domain (<strong>Custom domain</strong> property).</td>
<td><code class="prettyprint">x-droplr-rootredirect</code></td>
<td><code class="prettyprint">rootRedirect</code></td>
</tr>
<tr>
<td><strong>Drop privacy</strong></td>
<td>The privacy setting with which new drops will be created. Acceptable values are <code class="prettyprint">PUBLIC</code>, <code class="prettyprint">PRIVATE</code> and <code class="prettyprint">OBSCURE</code>.</td>
<td><code class="prettyprint">x-droplr-dropprivacy</code></td>
<td><code class="prettyprint">dropPrivacy</code></td>
</tr>
<tr>
<td><strong>Theme</strong></td>
<td>The theme to use on Droplr&rsquo;s website. This is a free-form string but typical values are &#39;default&rsquo;, &#39;light&rsquo; and &#39;dark&rsquo;. If the value is not recognized, the default theme will be used. Your application can also rely on this value to change its appearance.</td>
<td><code class="prettyprint">x-droplr-theme</code></td>
<td><code class="prettyprint">theme</code></td>
</tr>
<tr>
<td><strong>Drop count</strong></td>
<td>The number of drops created by this user.</td>
<td><code class="prettyprint">x-droplr-dropcount</code></td>
<td><code class="prettyprint">dropCount</code></td>
</tr>
</tbody></table>

<h5 id="notes">Notes</h5>

<ul>
<li>The account that&rsquo;s read is the one whose credentials are provided in the authentication header.</li>
</ul>

<h3 id="edit-account-details">Edit Account Details</h3>

<blockquote>
<p>Example Request</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT /account HTTP/1.1
</code></pre>
<pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"password"</span><span class="p">:</span><span class="s2">"5f4dcc3b5aa765d61d8327deb882cf99"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"domain"</span><span class="p">:</span><span class="s2">"d.pr"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"key"</span><span class="p">:</span><span class="s2">"value"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Edit information for an account</p>

<p><strong>Supported formats:</strong> HEADERS, JSON</p>

<h5 id="input-parameters">Input Parameters</h5>

<p><code class="prettyprint">PUT /account</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Header Key</th>
<th>Query Parameter</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Password</strong></td>
<td>The user&rsquo;s new password, hashed with SHA-1 algorithm.</td>
<td><code class="prettyprint">x-droplr-password</code></td>
<td><code class="prettyprint">password</code></td>
</tr>
<tr>
<td><strong>Theme</strong></td>
<td>The theme to use on Droplr&rsquo;s website. This is a free-form string but typical values are &#39;default&rsquo;, &#39;light&rsquo; and &#39;dark&rsquo;. If the value is not recognized, the default theme will be used. Your application can also rely on this value to change its appearance.</td>
<td><code class="prettyprint">x-droplr-theme</code></td>
<td><code class="prettyprint">theme</code></td>
</tr>
<tr>
<td><strong>Use custom domain</strong></td>
<td>A flag that indicates what type of domain should be used (if <strong>Custom domain</strong> property is set).</td>
<td><code class="prettyprint">x-droplr-domaintype</code></td>
<td><code class="prettyprint">domainType</code></td>
</tr>
<tr>
<td><strong>Custom domain</strong></td>
<td>A custom domain to use when returning shortlinks for drops, if the <strong>Use custom domain</strong> flag is set.</td>
<td><code class="prettyprint">x-droplr-domain</code></td>
<td><code class="prettyprint">domain</code></td>
</tr>
<tr>
<td><strong>Use root redirect</strong></td>
<td>A flag that indicates whether root redirects should be used when hitting the custom domain without a drop code. This property only makes sense if both <strong>Custom domain</strong> and <strong>Root redirect</strong> properties are set.</td>
<td><code class="prettyprint">x-droplr-userootredirect</code></td>
<td><code class="prettyprint">useRootRedirect</code></td>
</tr>
<tr>
<td><strong>Root redirect</strong></td>
<td>Where to redirect HTTP requests to the custom domain (<strong>Custom domain</strong> property).</td>
<td><code class="prettyprint">x-droplr-rootredirect</code></td>
<td><code class="prettyprint">rootRedirect</code></td>
</tr>
<tr>
<td><strong>Drop privacy</strong></td>
<td>The privacy setting with which new drops will be created. Acceptable values are <code class="prettyprint">PUBLIC</code>, <code class="prettyprint">PRIVATE</code> and <code class="prettyprint">OBSCURE</code>. To change the privacy to <code class="prettyprint">PRIVATE</code> a Pro account is required. All other changes are allowed.</td>
<td><code class="prettyprint">x-droplr-dropprivacy</code></td>
<td><code class="prettyprint">dropPrivacy</code></td>
</tr>
</tbody></table>

<h5 id="output-parameters">Output Parameters</h5>

<p>All output parameters are the same as the <a href="#read-account-details">read account details</a> action.</p>

<h5 id="errors">Errors</h5>

<table><thead>
<tr>
<th>Error Code</th>
<th>Status Code</th>
<th>Cause</th>
<th>Error Message</th>
</tr>
</thead><tbody>
<tr>
<td><strong>EditAccount.NoUpdateData</strong></td>
<td>400</td>
<td>No update data was found on request (no-op request).</td>
<td>No update data</td>
</tr>
<tr>
<td><strong>EditAccount.NoUpdateData</strong></td>
<td>400</td>
<td>No update data was found on request (no-op request).</td>
<td>No update data</td>
</tr>
<tr>
<td><strong>EditAccount.ProRequired</strong></td>
<td>403</td>
<td>The operation attempted to edit one or more fields for which a Pro subscription was required.</td>
<td>A Pro subscription is required to edit field <code class="prettyprint">%FIELD%</code></td>
</tr>
<tr>
<td><strong>EditAccount.ProRequiredEnableDomain</strong></td>
<td>403</td>
<td>The operation attempted to edit custom domain usage with a non-Pro user.</td>
<td>A Pro subscription is required to enable custom domain usage</td>
</tr>
<tr>
<td><strong>EditAccount.ProRequiredEnableRootRedirect</strong></td>
<td>403</td>
<td>The operation attempted to edit root redirect usage with a non-Pro user.</td>
<td>A Pro subscription is required to enable root redirect usage</td>
</tr>
<tr>
<td><strong>EditAccount.InvalidDomain</strong></td>
<td>400</td>
<td>The domain specified for the custom domain field is not valid (e.g. includes <code class="prettyprint">http(s)://</code> or other invalid characters).</td>
<td>Domain is invalid</td>
</tr>
<tr>
<td><strong>EditAccount.InvalidRootRedirect</strong></td>
<td>400</td>
<td>The input password parameter is not a SHA-1 hash.</td>
<td>Password must be a SHA1 hash of the user input</td>
</tr>
<tr>
<td><strong>EditAccount.InvalidPassword</strong></td>
<td>400</td>
<td>The root redirect specified is not a valid URL.</td>
<td>Root redirect is invalid</td>
</tr>
<tr>
<td><strong>EditAccount.Deleted</strong></td>
<td>400</td>
<td>The account has either been locked or deleted.</td>
<td>Account has been deleted</td>
</tr>
</tbody></table>

<h5 id="notes">Notes</h5>

<ul>
<li>Only Pro accounts can change their custom domain, root redirect and privacy to <code class="prettyprint">PUBLIC</code>. Regular accounts can change privacy option, as long as target privacy option is <code class="prettyprint">PUBLIC</code> or <code class="prettyprint">OBSCURE</code>.</li>
<li>The <strong>domain</strong> input parameter must <strong>not</strong> contain the scheme information, i.e. to use the custom domain <code class="prettyprint">http://droplr.biasedbit.com</code>, the app must only provide the string <code class="prettyprint">droplr.biasedbit.com</code>.</li>
</ul>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
